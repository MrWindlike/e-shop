### SQL注入
使用`adonisjs`框架的ORM能力时，其会自动处理SQL注入的情况。

当需要执行原生的SQL语句时，不要直接使用动态字符串，而是使用值绑定即可处理SQL注入的问题。

### XSS
系统暂时没有直接使用用户输入渲染成HTML标签的地方，暂时不用处理，如果以后商品添加富文本的详情，后端需对白名单之外的标签的特殊符号（如<, >等）做转码处理。

### CSRF
系统中采用的时JWT的方式进行登录，不会存在Cookie中，用户点击图片等资源不会自动携带，故不用处理。

### 支付
- 保证前端显示金额与实际支付金额一致

  用户进入付款页面后，商品价格有调整的可能，导致看到需要支付的金额与实际支付的金额不一致。

  该问题的解决办法是前端和后端同时计算所需要支付的金额，判断两个金额是否一致，不一致则重新获取数据和报错提示用户重新下单。

- 保证支付金额计算正确
  用于JavaScript采用 IEE755 64位双精度浮点数进行表示数字，有可能存在金额计算后得出错误结果的可能（比如0.1 + 0.2 ！== 0.3）。

  由于我们价格的精度是小数点后两位，当计算出错时（实际结果 - 预期结果） << 0.01，因此将计算结果也保留两位小数即可解决该问题。

- 库存

  由于可能存在大量用户同时下单同一商品的情况，如果采用异步先读取库存数据再进行减少库存的方案，可能会造成库存错误扣除的情况，因此在操作库存时，采取同一个SQL语句进行读取和修改库存的方案。
